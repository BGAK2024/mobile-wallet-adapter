(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(e,n,i){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return i(2512)}])},2512:function(e,n,i){"use strict";i.r(n),i.d(n,{default:function(){return P}});var t=i(5893),l=i(6795),r=i(8539),a=i(6788),s=i(3145),o=i(5879),c=i(7294),d=i(1873),u=i(7182),h=i(1769),x=i(642),f=i(4718),g=i(4306),j=i(7480),Z=i(8100);function m(e){let{publicKey:n}=e,{connection:i}=(0,f.R)(),l=(0,c.useCallback)(async function(e){return await i.getBalance(n)},[i,n]),{data:r}=(0,Z.ZP)("accountBalance",l,{suspense:!0}),a=(0,c.useMemo)(()=>new Intl.NumberFormat(void 0,{maximumFractionDigits:1}).format((r||0)/j.j5),[r]),{wallet:s}=(0,g.O)();return(0,c.useEffect)(()=>{if(s){function e(){(0,Z.JG)("accountBalance",0,{revalidate:!1})}return s.adapter.on("disconnect",e),()=>{s.adapter.off("disconnect",e)}}},[s]),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(x.Z,{component:"span",fontSize:22,lineHeight:0,position:"relative",mr:.4,top:-2,sx:{verticalAlign:"middle"},children:"◎"}),a]})}function p(e){let{publicKey:n}=e,i=(0,c.useMemo)(()=>null==n?void 0:n.toBase58(),[n]);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(d.Z,{color:"info",sx:{marginRight:1},label:(0,t.jsx)(c.Suspense,{fallback:(0,t.jsx)(u.Z,{color:"inherit",size:18,sx:{verticalAlign:"middle"}}),children:(0,t.jsx)(m,{publicKey:n})})}),(0,t.jsx)(a.Z,{children:(0,t.jsx)(h.Z,{color:"inherit",href:"https://explorer.solana.com/address/".concat(i,"?cluster=devnet"),rel:"noreferrer",target:"_blank",underline:"none",children:(0,t.jsx)("code",{children:i.slice(0,8)})})})]})}var v=i(1015),w=i(1292);function b(e){let{connected:n,disconnect:i}=(0,g.O)(),l=(0,w.Z)(i,[i]);return(0,t.jsx)(v.Z,{...e,disabled:!n,onClick:l})}var k=i(1812),y=i(124);function C(e){let{children:n}=e,{publicKey:i}=(0,g.O)(),{connection:l}=(0,f.R)(),{mutate:r}=(0,Z.kY)(),{enqueueSnackbar:a}=(0,y.Ds)(),[s,o]=(0,c.useState)(!1),d=(0,w.Z)(async e=>{let n=await l.requestAirdrop(e,1e8);return await l.confirmTransaction(n)},[l]);return(0,t.jsx)(k.Z,{loading:s,color:"primary",disabled:null==i,onClick:async()=>{if(null!=i){o(!0);try{let e=await d(i);if(e){let{value:{err:n}}=e;n?a("Failed to fund account: "+(n instanceof Error?n.message:n),{variant:"error"}):(a("Funding successful",{variant:"success"}),r("accountBalance",e=>e+1e8))}}finally{o(!1)}}},variant:"outlined",children:n})}var S=i(2134),F=i(9106),_=i(2187),B=i(6331),A=i(5858),M=i(6727),E=i(6247),O=i(8764).Buffer;function G(e){let{children:n,message:i}=e,{enqueueSnackbar:l}=(0,y.Ds)(),{connection:r}=(0,f.R)(),{publicKey:a,sendTransaction:s,wallet:o}=(0,g.O)(),[d,u]=(0,c.useState)(!1),[h,x]=(0,c.useState)(!1),Z=null==o?void 0:o.adapter.supportedTransactionVersions,m=(null==Z?void 0:Z.has(0))?0:"legacy",p=(0,w.Z)(async e=>{let n;let{context:i,value:{blockhash:t,lastValidBlockHeight:l}}=await r.getLatestBlockhashAndContext(),o=new j.Sl({data:e,keys:[],programId:new j.nh("MemoSq4gqABAXKb96qnH8TysNcWxMyWCqXgDLGmfcHr")});if("legacy"===m)n=new j.YW({blockhash:t,lastValidBlockHeight:l,feePayer:a}).add(o);else{let e=new j.$Z({payerKey:a,recentBlockhash:t,instructions:[o]});n=new j.GS(e.compileToV0Message())}let c=await s(n,r,{minContextSlot:i.slot});return[c,await r.confirmTransaction({blockhash:t,lastValidBlockHeight:l,signature:c})]},[r,a,s]);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(F.Z,{fullWidth:!0,variant:"contained",children:[(0,t.jsx)(k.Z,{disabled:null==a||!i,loading:h,onClick:async()=>{if(null!=a&&null!=s){x(!0);try{let e=await p(O.from(i));if(e){let[n,i]=e,{value:{err:r}}=i;r?l("Failed to record message:"+(r instanceof Error?r.message:r),{variant:"error"}):l("Message recorded",{action(){let e="https://explorer.solana.com/tx/"+n+"?cluster="+E.Q.Devnet;return(0,t.jsx)(v.Z,{color:"inherit",href:e,target:"_blank",children:"View"})},variant:"success"})}}finally{x(!1)}}},variant:"contained",children:n}),(0,t.jsx)(v.Z,{disabled:null==a,onClick:()=>{u(!0)},sx:{flexBasis:0},children:(0,t.jsx)(S.Z,{fontSize:"small"})})]}),(0,t.jsx)(_.Z,{open:d,onClose:()=>{u(!1)},children:(0,t.jsxs)(B.Z,{children:[(0,t.jsx)(A.Z,{children:"Clicking “Record” will send a transaction that records the text you've written on the Solana blockchain using the Memo program."}),(0,t.jsx)(M.Z,{children:(0,t.jsx)(v.Z,{autoFocus:!0,onClick:()=>{u(!1)},children:"Got it"})})]})})]})}var N=i(3893);function W(e){let{connected:n,signIn:i}=(0,g.O)(),l=(0,w.Z)(async()=>{if(i){let e={domain:window.location.host,statement:"Sign in to Example Web App",uri:window.location.origin},n=await i(e);if(!(0,N.HS)(e,n))throw Error("Sign In verification failed!")}else throw Error("Sign In not available, wallet does not support sign in")},[i]);return(0,t.jsx)(v.Z,{...e,disabled:n,onClick:l})}function D(e){let{children:n,message:i}=e,{enqueueSnackbar:l}=(0,y.Ds)(),{publicKey:r,signMessage:s}=(0,g.O)(),[o,d]=(0,c.useState)(null),[u,h]=(0,c.useState)(!1),x=(0,w.Z)(async e=>await s(e),[s]);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(F.Z,{fullWidth:!0,variant:"outlined",children:[(0,t.jsx)(v.Z,{disabled:null==r||!i,onClick:async()=>{if(null==r)return;let e=new Uint8Array(i.split("").map(e=>e.charCodeAt(0))),n=await x(e);n&&l("Message signed",{action:()=>(0,t.jsx)(v.Z,{color:"inherit",onClick:()=>d(n),children:"View Signature"}),variant:"success"})},children:n}),(0,t.jsx)(v.Z,{disabled:null==r,onClick:()=>{h(!0)},sx:{flexBasis:0},children:(0,t.jsx)(S.Z,{fontSize:"small"})})]}),(0,t.jsx)(_.Z,{open:u,onClose:()=>{h(!1)},children:(0,t.jsxs)(B.Z,{children:[(0,t.jsx)(A.Z,{children:"Clicking “Sign Message” will sign the text you've written and display the signature."}),(0,t.jsx)(M.Z,{children:(0,t.jsx)(v.Z,{autoFocus:!0,onClick:()=>{h(!1)},children:"Got it"})})]})}),(0,t.jsx)(_.Z,{open:null!=o,onClose:()=>{d(null)},children:(0,t.jsxs)(B.Z,{children:[(0,t.jsx)(A.Z,{children:(0,t.jsx)(a.Z,{sx:{wordBreak:"break-all"},children:o?btoa(String.fromCharCode.call(null,...o)):null})}),(0,t.jsx)(M.Z,{children:(0,t.jsx)(v.Z,{autoFocus:!0,onClick:()=>{d(null)},children:"Neat!"})})]})})]})}var T=i(5785),R=i(5152),q=i.n(R);let H=(0,T.ZP)("div")(e=>{let{theme:n}=e;return n.mixins.toolbar}),I=q()(()=>i.e(718).then(i.bind(i,718)),{loadableGenerated:{webpack:()=>[718]},ssr:!1});var P=()=>{let{publicKey:e}=(0,g.O)(),[n,i]=(0,c.useState)("");return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(l.Z,{position:"fixed",children:(0,t.jsxs)(r.Z,{children:[(0,t.jsx)(a.Z,{variant:"h6",component:"div",sx:{flexGrow:1},children:"Mobile web dApp"}),e?(0,t.jsx)(p,{publicKey:e}):(0,t.jsx)(I,{color:"inherit",variant:"outlined",children:"Connect"})]})}),(0,t.jsx)(H,{}),(0,t.jsxs)(s.Z,{p:2,spacing:2,flexGrow:1,children:[(0,t.jsx)(a.Z,{children:"Write a message to record on the blockchain."}),(0,t.jsx)(o.Z,{disabled:null==e,label:"What's on your mind?",onChange:e=>{i(e.target.value)},value:n}),(0,t.jsx)(G,{message:n,children:"Record Message"}),(0,t.jsx)(D,{message:n,children:"Sign Message"}),(0,t.jsx)(C,{children:"Fund Account (devnet)"}),e?(0,t.jsx)(b,{color:"error",variant:"outlined",children:"Disconnect"}):(0,t.jsx)(W,{variant:"outlined",children:"Sign In"})]})]})}},1292:function(e,n,i){"use strict";i.d(n,{Z:function(){return l}});var t=i(7294);function l(e,n){return(0,t.useCallback)(async function(){for(var n=arguments.length,i=Array(n),t=0;t<n;t++)i[t]=arguments[t];try{return await e(...i)}catch(e){}},[...n||[]])}}},function(e){e.O(0,[571,888,774,179],function(){return e(e.s=8312)}),_N_E=e.O()}]);